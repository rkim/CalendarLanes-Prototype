<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<script type="text/javascript" src="./scripts/jquery-1.10.0.min.js"></script>
		<script type="text/javascript" src="./scripts/jquery.kinetic.js"></script>
		<script type="text/javascript" src="./scripts/infinite.scheduler.js"></script>

		<script type="text/javascript" src="./scripts/fd.scheduler.js"></script>

		<link href="./styles/lanes.css" media="screen" rel="stylesheet" type="text/css">
		<link href="./styles/event.occurrence.css" media="screen" rel="stylesheet" type="text/css">
	</head>

	<script type="text/javascript">
		function xscroll() {
			var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
			var isChrome = !!window.chrome;  

			$('#xscroll').prop('checked') ?
				$('.calendar-scroller').css({"overflow-x":"auto"}) :
				$('.calendar-scroller').css({"overflow-x":"hidden"});

			if (isChrome || isSafari){
				$('.scheduler').css({"border-bottom":"0px"});
			}
		};

		
		$(document).ready(function() {
			// -----------------------------
			// Initialize demo controls
			$('#xscroll').click(function() {xscroll();});
			xscroll();
			
			// -----------------------------
			// Attach circular scrolling
			$('.calendar-scroller').infiniteScrollable();

			// -----------------------------
			// Front Desk Scheduler!
			$('.scheduler').fdScheduler();

			// -----------------------------
			// Attach kinetic scrolling
			$('.calendar-scroller').kinetic({
				cursor:'ew-resize',
				y:false,
				maxvelocity: 55,
				triggerHardware:true
			});

			// -----------------------------
			// Event handlers for Front Desk
			// Scheduler
			//
			// All this will eventually get
			// packaged up into a jQuery plugin.
			var expandedEvents = new Array();
			var collapseEvents = function()
			{
				if (expandedEvents.length > 0)
				{	
					while(expandedEvents.length > 0)
					{
						var event = expandedEvents.pop();
						var $this = $(event);

						$this.prop("expanded", false);
						$this.css({"opacity":"1", "pointer-events":"auto"});
						$this.children('.event_o').children().css({"display":"block"});
					}
				}
			}

			// NOTE :: rkim :: 02-Jun-2013
			// There's a built-in delay to .click that won't work in
			// touch-enabled devices.  Use.bind('touchstart', ...)
			// instead.
			
			var dragged = false;
			var mousedown = false;
			var clientX = 0;
			var clientY = 0;

			$(".scheduler").click(function(e) {
				collapseEvents();
			});

			$(".scheduler").mousedown(function(e) {
				mousedown = true;
				clientX = e.clientX;
				clientY = e.clientY;
				// bind mousemove

			});
			$(".scheduler").mousemove(function(e) {
				if (mousedown) {
					collapseEvents();
				}
			});
			$(".scheduler").mouseup(function(e) {
				mousedown = false;
			});

			$('.scheduler .event').click(function(e){

				$this = $(this);
				var isExpanded = $this.prop("expanded");
				if (!isExpanded) 
				{
					$this.prop("expanded", true);
					$this.css({"opacity":"0.3", "pointer-events":"none"});
					$this.children('.event_o').children().css({"display":"none"});

					expandedEvents.push($this);
					e.stopPropagation();
					// bind scheduler.click?
				}
			});

		});	// $(document).ready(...)
		
	</script>
	
	
	<body style="width:100%;">
	<div id="content">


		<!-- 
		- base layout - using divs
		-->
		<div style="width:400px;">
			<p class="title">base layout</p>
			<p>The proposed default display mode.</p>
			<p>This may look really dumb for single-propietorship businesses. We
				may want to default to the week view for those clients.</p>
			<p class="strike">
				Also contains a mockup of a continuous scroll calendar (probably
				implemented as a circular array of time columns).</p>
		</div>


		<div class="viewport">
			<div style="height:120px"></div>
			<div class="divider"></div>

			<div id="basic" class="scheduler">
				<div class="calendar-container">
					<div class="calendar-scroller">
						<div class="calendar-data">

							<div class="time-lane">
								<div class="time-cell">7:00am</div><div class="time-cell">8:00am</div>
								<div class="time-cell">9:00am</div><div class="time-cell">10:00am</div><div class="time-cell">11:00am</div>
								<div class="time-cell">12:00pm</div><div class="time-cell">1:00pm</div><div class="time-cell">2:00pm</div>
								<div class="time-cell">3:00pm</div><div class="time-cell">4:00pm</div><div class="time-cell">5:00pm</div>
								<div class="time-cell">6:00pm</div><div class="time-cell">7:00pm</div><div class="time-cell">8:00pm</div>
							</div>
							<div class="time-spacer"></div>




							<!--
               - Lane :: Staff 1 
               -->
              <div class="event-lane">
              	<!-- 1pm - 2pm :: Seattle :: Class B :: Staff 1  -->
	              <div class="event" style="left:650px; height:33px; width:90px;">
	                <div class="event_o service_color_2 type_class">
	                  <span class="name_and_time">
	                    <span class="full_time">
	                      <span class="start_at">1pm</span>
	                      <span class="dash">-</span>
	                      <span class="end_at">2pm</span>
	                    </span>
	                    <span class=""><strong>Class B</strong> w/ Staff 1</span>
	                    <span class="location">- Seattle</span>
	                  </span>
	                </div>
	              </div>
	              <!-- 1pm - 2:30pm  :: Seattle :: Class A :: Staff 1 -->
	              <div class="event" style="left:650px; top:33px; height:33px; width:150px;">
	                <div class="event_o service_color_1 type_class">
	                  <span class="name_and_time">
	                    <span class="full_time">
	                      <span class="start_at">1pm</span>
	                      <span class="dash">-</span>
	                      <span class="end_at">2:30pm</span>
	                    </span>
	                    <span class=""><strong>Class A</strong> w/ Staff 1 & Staff 3</span>
	                    <span class="location">- Seattle</span>
	                  </span>
	                </div>  
	              </div>
	            </div>
							<div class="grid-lane"><!-- table-row -->
								<div class="grid start"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
							</div>



							<!--
               - Lane :: Staff 2
               -->
							<div class="event-lane">
	              <!-- 10am - 12pm :: Seattle :: Class C :: Staff 2  -->
								<div class="event" style="left:350px; height:65px; width:200px;">
							    <div class="event_o service_color_3 type_class">
							      <span class="name_and_time">
							        <span class="full_time">
							          <span class="start_at">10am</span>
							          <span class="dash">-</span>
							          <span class="end_at">12pm</span>
							        </span>
							        <span class=""><strong>Class C</strong> w/ Staff 2</span>
							        <span class="location">- Seattle</span>
							      </span>
							    </div>
							  </div>
	              <!-- 3pm - 5pm :: Seattle :: Class C :: Staff 2  -->
							  <div class="event" style="left:850px; height:65px; width:200px;">
							    <div class="event_o service_color_3 type_class">
							      <span class="name_and_time">
							        <span class="full_time">
							          <span class="start_at">3pm</span>
							          <span class="dash">-</span>
							          <span class="end_at">5pm</span>
							        </span>
							        <span class=""><strong>Class C</strong> w/ Staff 2</span>
							        <span class="location">- Seattle</span>
							      </span>
							    </div>
							  </div>
							</div>
							<div class="grid-lane"><!-- table-row -->
								<div class="grid start"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
							</div>

							<!--
               - Lane :: Staff 3
               -->
							<div class="event-lane">
								<!-- 9:30am - 10:30am :: Seattle :: Class B :: Staff 3 -->
								<div class="event" style="left:300px; height:65px; width:100px;">
									<div class="event_o service_color_2 type_class">
									  <span class="name_and_time">
									    <span class="full_time">
									      <span class="start_at">9:30am</span>
									      <span class="dash">-</span>
									      <span class="end_at">10:30am</span>
									    </span>
									    <span class=""><strong>Class B</strong> w/ Staff 3</span>
									    <span class="location">- Seattle</span>
									  </span>
									</div>
								</div>
								<!-- 1pm - 2:30pm :: Seattle :: Class A :: Staff 3 -->
								<div class="event" style="left:650px; height:65px; width:150px;">
									<div class="event_o service_color_1 type_class">
									  <span class="name_and_time">
									    <span class="full_time">
									      <span class="start_at">1pm</span>
									      <span class="dash">-</span>
									      <span class="end_at">2:30pm</span>
									    </span>
									    <span class=""><strong>Class A</strong> w/ Staff 1 & Staff 3</span>
									    <span class="location">- Seattle</span>
									  </span>
									</div>
								</div>
							</div>
							<div class="grid-lane"><!-- table-row -->
								<div class="grid start"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
							</div>

							<!--
               - Lane :: Staff 4
               -->
							<div class="event-lane">
								<!-- 10am - 12pm :: Los Angeles :: Class D :: Staff 4 -->
	              <div class="event" style="left:350px; height:60px; width:200px;">
	                <div class="event_o service_color_4 type_class">
	                  <span class="name_and_time">
	                    <span class="full_time">
	                      <span class="start_at">10am</span>
	                      <span class="dash">-</span>
	                      <span class="end_at">12pm</span>
	                    </span>
	                    <span class=""><strong>Class D</strong> w/ Staff 4</span>
	                    <span class="location">- Los Angeles</span>
	                  </span>
	                </div>
	              </div>
	              <!-- 11:30am - 12:30pm :: Los Angeles :: Class B :: Staff 4 -->
	              <div class="event" style="left:500px; top:5px; height:60px; width:100px;">
	                <div class="event_o service_color_2 type_class stacked">
	                  <span class="name_and_time">
	                    <span class="full_time">
	                      <span class="start_at">11:30am</span>
	                      <span class="dash">-</span>
	                      <span class="end_at">12:30pm</span>
	                    </span>
	                    <span class=""><strong>Class B</strong> w/ Staff 4</span>
	                    <span class="location">- Los Angeles</span>
	                  </span>
	                </div>
	              </div>
							</div>
							<div class="grid-lane"><!-- table-row -->
								<div class="grid start"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
								<div class="grid mid"></div><div class="grid"></div><div class="grid mid"></div>
								<div class="grid"></div><div class="grid mid"></div><div class="grid"></div>
							</div>

						</div><!-- calendar-data -->
					</div><!-- calendar-scroller -->
				</div><!-- calendar-container -->


				<!-- lane-column -->
				<div class="lane-column">
					<div class="table">
						<div class="time-cell"></div>
						<div></div><!-- spacer -->
						<div class="lane"><div class="valign-mid pad10">Staff 1</div></div>
						<div></div><!-- spacer -->
						<div class="lane"><div class="valign-mid pad10">Staff 2</div></div>
						<div></div><!-- spacer -->
						<div class="lane"><div class="valign-mid pad10">Staff 3</div></div>
						<div></div><!-- spacer -->
						<div class="lane"><div class="valign-mid pad10">Staff 4</div></div>
					</div>
				</div><!-- lane column -->


			</div><!-- scheduler -->
		</div><!-- viewport -->
		<div style="height:40px;"></div>
		


		
		</div><!-- viewport -->
		<div style="height:80px;"></div>


	</div>
	</body>
</html>